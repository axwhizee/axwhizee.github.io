name: Run Weekly Python Script # å·¥ä½œæµçš„åç§°
run-name: ${{ github.actor }} is testing out GitHub Actions ğŸš€

on:
  schedule:
    # ä½¿ç”¨ Cron è¡¨è¾¾å¼è®¾ç½®è¿è¡Œé¢‘ç‡
    # ä¾‹å¦‚ '0 3 * * 0' è¡¨ç¤ºæ¯å‘¨æ—¥å‡Œæ™¨ 3 ç‚¹ (UTC æ—¶é—´)
    # æ ¼å¼ä¸º: åˆ†é’Ÿ å°æ—¶ æ—¥ æœˆ æ˜ŸæœŸå‡ 
    # ä½ å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹è¿™ä¸ªæ—¶é—´
    - cron: '50 23 * * 0'
  # å…è®¸æ‰‹åŠ¨è§¦å‘ï¼Œæ–¹ä¾¿æµ‹è¯•
  workflow_dispatch:

jobs:
  execute:
    runs-on: ubuntu-latest # ä½¿ç”¨ Ubuntu ç¯å¢ƒè¿è¡Œä½œä¸š

    steps:
    - name: Check out repository # ç¬¬ä¸€æ­¥ï¼šæ‹‰å–ä»“åº“ä»£ç 
      uses: actions/checkout@v4

    - name: Set up Python # ç¬¬äºŒæ­¥ï¼šå®‰è£… Python ç¯å¢ƒ
      uses: actions/setup-python@v5
      with:
        python-version: '3.x' # æŒ‡å®š Python ç‰ˆæœ¬

    - name: Install dependencies # ç¬¬ä¸‰æ­¥ï¼šå®‰è£…ä¾èµ– (å¦‚æœæœ‰ requirements.txt)
      run: |
        python -m pip install --upgrade pip
        if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
      # "å¦‚æœæ ¹ç›®å½•ä¸‹å­˜åœ¨ requirements.txt æ–‡ä»¶ï¼Œå°±æ‰§è¡Œ pip install -r ... å‘½ä»¤"

    - name: Run Python Script # ç¬¬å››æ­¥ï¼šè¿è¡Œä½ çš„ Python è„šæœ¬
      env: # ä½¿ç”¨ env å…³é”®å­—å°† Secrets æ³¨å…¥ä¸ºç¯å¢ƒå˜é‡
        DASHSCOPE_API_KEY: ${{ secrets.DASHSCOPE_API_KEY }} # å°†æ­¥éª¤1ä¸­è®¾ç½®çš„ Secret æ˜ å°„åˆ°ç¯å¢ƒå˜é‡ API_KEY
      run: python AI_News_Crawler.py # æ›¿æ¢æˆä½ çš„ Python è„šæœ¬çš„å®é™…æ–‡ä»¶å
